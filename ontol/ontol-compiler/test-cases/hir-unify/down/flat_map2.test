// The difference with `flat_map1` is that the non-seq-prop appears _first_ here:
(struct ($d)
    (prop! $d R:1:2 $a)
    (prop! $d R:1:5
        (matrix
            (.. @c
                (struct ($e)
                    (prop! $e R:1:4
                        [$b #u]
                    )
                )
            )
        )
    )
)

(matrix
    (.. @c
        (struct ($f)
            (prop! $f R:1:7 $a)
            (prop! $f R:1:8 $b)
        )
    )
)

|$d| (block
    (let-prop $a ($d R:1:2))
    (let-prop [$c] ($d R:1:5))
    (make-matrix ($g)
        (for-each $c ($e)
            (let-prop [$b $_] ($e R:1:4))
            (insert $g
                (struct ($f)
                    (prop! $f R:1:7 $a)
                    (prop! $f R:1:8 $b)
                )
            )
        )
    )
)