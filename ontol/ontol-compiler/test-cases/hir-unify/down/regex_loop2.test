(struct ($d)
    (prop! $d R:1:0
        (regex-seq (@c) def@0:0 ((1 $a) (2 $b)))
    )
)

(struct ($e)
    (prop! $e R:2:0
        (set
            (.. @c
                #u
                (struct ($f)
                    (prop! $f R:2:1 $a)
                    (prop! $f R:2:2 $b)
                )
            )
        )
    )
)

|$d| (block
    (let-prop $g ($d R:1:0))
    (let-regex-iter $c ((1 $a) (2 $b)) def@0:0 $g)
    (struct ($e)
        (prop! $e R:2:0
            (make-seq ($h)
                (for-each $c ($_ $i)
                    (catch (@j)
                        (let-tup? @j ($a $b) $i)
                        (insert $h #u
                            (struct ($f)
                                (prop! $f R:2:1 $a)
                                (prop! $f R:2:2 $b)
                            )
                        )
                    )
                )
            )
        )
        (move-rest-attrs $e $d)
    )
)
