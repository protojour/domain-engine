(struct ($a)
    (prop? $a R:0:0
        (#u (set (.. @b #u $c)))
    )
)

(set (.. @d #u
    (match-struct ($e)
        (prop? $e R:1:0
            (element-in (set (.. @b #u $c)))
        )
    )
))

|$a| (block
    (let-prop $_ $b ($a R:0:0))
    (match-struct ($f)
        (let-cond-var $e $f)
        (push-cond-clauses $f
            (root '$e)
        )
        (catch (@h)
            (try? @h $b)
            (let-cond-var $g $f)
            (push-cond-clauses $f
                (match-prop '$e R:1:0 element-in '$g)
            )
            (for-each $b ($_ $c)
                (push-cond-clauses $f
                    (member '$g (_ $c))
                )
            )
        )
    )
)
