(match-struct ($d)
    (prop! $d R:1:2
        (#u (regex-seq (@c) def@0:43 ((1 $a)) ((2 $b))))
    )
)

(struct ($e)
    (prop! $e R:1:6
        (#u
            (set
                (.. @c
                    #u
                    (struct ($f)
                        (prop! $f R:1:4
                            (#u $a)
                        )
                    )
                )
            )
        )
    )
    (prop! $e R:1:7
        (#u
            (set
                (.. @c
                    #u
                    (struct ($g)
                        (prop! $g R:1:4
                            (#u $b)
                        )
                    )
                )
            )
        )
    )
)

|$d| (block
    (let-prop $_ $h ($d R:1:2))
    (let-regex-iter $c ((1 $a)) ((2 $b)) def@0:43 $h)
    (struct ($e)
        (prop! $e R:1:6
            (#u
                (make-seq ($i)
                    (for-each $c ($_ $j)
                        (catch (@k)
                            (let-tup? @k ($a $_) $j)
                            (insert $i #u
                                (struct ($f)
                                    (prop! $f R:1:4
                                        (#u $a)
                                    )
                                )
                            )
                        )
                    )
                )
            )
        )
        (prop! $e R:1:7
            (#u
                (make-seq ($l)
                    (for-each $c ($_ $m)
                        (catch (@n)
                            (let-tup? @n ($_ $b) $m)
                            (insert $l #u
                                (struct ($g)
                                    (prop! $g R:1:4
                                        (#u $b)
                                    )
                                )
                            )
                        )
                    )
                )
            )
        )
        (move-rest-attrs $e $d)
    )
)
